{% for model_field in SURFACE_MODEL_FIELDS %}
[scheduling]
    [[graph]]
    PT1H = """
    install_website_skeleton[^] & install_local_cset[^] => FETCH_DATA
    FETCH_DATA:succeed-all => pre_process_domain_mean_surface_time_series_{{model_field}} => housekeeping_raw
    """

    PT3H = """
    collate_domain_mean_surface_time_series_{{model_field}}[-PT3H] &
    pre_process_domain_mean_surface_time_series_{{model_field}}[-PT2H] &
    pre_process_domain_mean_surface_time_series_{{model_field}}[-PT1H] &
    pre_process_domain_mean_surface_time_series_{{model_field}} =>
    collate_domain_mean_surface_time_series_{{model_field}}
    """

    R1/$ = """
    collate_domain_mean_surface_time_series_{{model_field}} => housekeeping_full
    """

[runtime]
    [[pre_process_domain_mean_surface_time_series_{{model_field}}]]
    inherit = PROCESS_DATA
        [[[environment]]]
        CSET_RECIPE_NAME = "generic_surface_domain_mean_time_series.yaml"
        CSET_ADDOPTS = "--VARNAME={{model_field}}"

    [[collate_domain_mean_surface_time_series_{{model_field}}]]
    inherit = COLLATE_PROCESSED_DATA
        [[[environment]]]
        CSET_RECIPE_NAME = "generic_surface_domain_mean_time_series.yaml"
        CSET_ADDOPTS = "--VARNAME={{model_field}}"

{% endfor %}
