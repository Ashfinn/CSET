title: Age of Air Diagnostic
description: |
  Extracts data required for, and calculates the age of air diagnostic on a given pressure levels. This is then plotted on a map projection for each lead-time. A timeseries plot is also produced.

steps:
  - operator: read.read_cubes

  - operator: ageofair.compute_ageofair
    XWIND:
        operator: filters.filter_cubes
        constraint:
            operator: constraints.generate_stash_constraint
            stash: m01s15i201
    YWIND:
        operator: filters.filter_cubes
        constraint:
            operator: constraints.generate_stash_constraint
            stash: m01s15i202
    WWIND:
        operator: filters.filter_cubes
        constraint:
            operator: constraints.generate_stash_constraint
            stash: m01s15i242
    GEOPOT:
        operator: filters.filter_cubes
        constraint:
            operator: constraints.generate_stash_constraint
            stash: m01s16i202

    plevs: $AOA_PLEV
    incW: $AOA_incW
    cyclic: $AOA_cyclic

#  - operator: plot.postage_stamp_contour_plot

  - operator: write.write_cube_to_nc
